
import streamlit as st
import pickle
from myfunction_66130701924 import get_movie_recommendations

# ====== ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡πá‡∏ö ======
st.set_page_config(page_title="üé¨ Movie Recommendation App", layout="centered")
st.title("üé• Movie Recommendation System")
st.markdown("‡πÅ‡∏≠‡∏õ‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡πÇ‡∏°‡πÄ‡∏î‡∏• Collaborative Filtering ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì")

# ====== ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ======
with open("recommendation_data.pkl", "rb") as file:
    user_similarity_df, user_movie_ratings = pickle.load(file)

# ====== UI: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å user ======
all_users = user_movie_ratings.index.tolist()
user_id = st.selectbox("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å User ID:", all_users, index=0)

# ====== UI: ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ ======
num_recs = st.slider("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:", 1, 20, 10)

# ====== ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• ======
if st.button("üéØ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå"):
    recommendations = get_movie_recommendations(user_id, user_similarity_df, user_movie_ratings, num_recs)
    
    if recommendations:
        st.success(f"‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ **User {user_id}**:")
        for i, movie_title in enumerate(recommendations, start=1):
            st.write(f"{i}. üé¨ {movie_title}")
    else:
        st.warning("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ üòÖ")

# ====== Footer ======
st.markdown("---")
st.caption("Developed with ‚ù§Ô∏è using Streamlit")

